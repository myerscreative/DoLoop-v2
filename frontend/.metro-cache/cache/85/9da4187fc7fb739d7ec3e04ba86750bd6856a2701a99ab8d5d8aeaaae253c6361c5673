{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":91,"index":91}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":92},"end":{"line":2,"column":69,"index":161}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":162},"end":{"line":3,"column":40,"index":202}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/Users/robertmyers/Code/DoLoop/frontend/contexts/LoopsContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"LoopsProvider\", {\n    enumerable: true,\n    get: function () {\n      return LoopsProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useLoops\", {\n    enumerable: true,\n    get: function () {\n      return useLoops;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _AuthContext = require(_dependencyMap[2], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_BASE_URL = 'https://loop-manager.preview.emergentagent.com';\n  const LoopsContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const LoopsProvider = ({\n    children\n  }) => {\n    const [loops, setLoops] = (0, _react.useState)([]);\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    const {\n      token\n    } = (0, _AuthContext.useAuth)();\n    console.log('LoopsContext: Using API_BASE_URL:', API_BASE_URL);\n\n    // Load loops from AsyncStorage on mount\n    (0, _react.useEffect)(() => {\n      loadStoredLoops();\n    }, []);\n\n    // Fetch loops when token is available\n    (0, _react.useEffect)(() => {\n      console.log('LoopsContext: useEffect triggered, calling fetchLoops');\n      if (token) {\n        fetchLoops();\n      }\n    }, [token]);\n    const loadStoredLoops = async () => {\n      try {\n        const storedLoops = await AsyncStorage.default.getItem('loops');\n        if (storedLoops) {\n          console.log('AsyncStorage loops:', storedLoops);\n          const parsedLoops = JSON.parse(storedLoops);\n          console.log('Parsed stored loops:', parsedLoops);\n          setLoops(parsedLoops);\n        }\n      } catch (error) {\n        console.error('Failed to load stored loops:', error);\n      }\n    };\n    const fetchLoops = (0, _react.useCallback)(async () => {\n      console.log('LoopsContext: fetchLoops started');\n      console.log('Token exists:', !!token);\n      if (!token) {\n        console.log('No token, skipping fetchLoops');\n        return;\n      }\n      try {\n        setIsLoading(true);\n        const url = `${API_BASE_URL}/api/loops`;\n        console.log('Fetching from URL:', url);\n        const response = await fetch(url, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        console.log('Response status:', response.status);\n        console.log('Response URL:', response.url);\n        if (response.ok) {\n          const data = await response.json();\n          setLoops(data);\n          // Store loops in AsyncStorage\n          await AsyncStorage.default.setItem('loops', JSON.stringify(data));\n        } else {\n          console.error('Failed to fetch loops:', response.status);\n          const errorText = await response.text();\n          console.error('Error response body:', errorText);\n        }\n      } catch (error) {\n        console.error('Error fetching loops:', error);\n      } finally {\n        setIsLoading(false);\n        console.log('LoopsContext: fetchLoops completed');\n      }\n    }, [token]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(LoopsContext.Provider, {\n      value: {\n        loops,\n        fetchLoops,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }, this);\n  };\n  const useLoops = () => {\n    const context = (0, _react.useContext)(LoopsContext);\n    if (context === undefined) {\n      throw new Error('useLoops must be used within a LoopsProvider');\n    }\n    return context;\n  };\n});","lineCount":122,"map":[[13,2,16,0,"Object"],[13,8,16,0],[13,9,16,0,"defineProperty"],[13,23,16,0],[13,24,16,0,"exports"],[13,31,16,0],[14,4,16,0,"enumerable"],[14,14,16,0],[15,4,16,0,"get"],[15,7,16,0],[15,18,16,0,"get"],[15,19,16,0],[16,6,16,0],[16,13,16,0,"LoopsProvider"],[16,26,16,0],[17,4,16,0],[18,2,16,0],[19,2,102,0,"Object"],[19,8,102,0],[19,9,102,0,"defineProperty"],[19,23,102,0],[19,24,102,0,"exports"],[19,31,102,0],[20,4,102,0,"enumerable"],[20,14,102,0],[21,4,102,0,"get"],[21,7,102,0],[21,18,102,0,"get"],[21,19,102,0],[22,6,102,0],[22,13,102,0,"useLoops"],[22,21,102,0],[23,4,102,0],[24,2,102,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_AuthContext"],[28,18,3,0],[28,21,3,0,"require"],[28,28,3,0],[28,29,3,0,"_dependencyMap"],[28,43,3,0],[29,2,3,40],[29,6,3,40,"_reactJsxDevRuntime"],[29,25,3,40],[29,28,3,40,"require"],[29,35,3,40],[29,36,3,40,"_dependencyMap"],[29,50,3,40],[30,2,6,0],[30,8,6,6,"API_BASE_URL"],[30,20,6,18],[30,23,6,21],[30,71,6,69],[31,2,14,0],[31,8,14,6,"LoopsContext"],[31,20,14,18],[31,36,14,21],[31,40,14,21,"createContext"],[31,46,14,34],[31,47,14,34,"createContext"],[31,60,14,34],[31,62,14,65,"undefined"],[31,71,14,74],[31,72,14,75],[32,2,16,7],[32,8,16,13,"LoopsProvider"],[32,21,16,67],[32,24,16,70,"LoopsProvider"],[32,25,16,71],[33,4,16,73,"children"],[34,2,16,82],[34,3,16,83],[34,8,16,88],[35,4,17,2],[35,10,17,8],[35,11,17,9,"loops"],[35,16,17,14],[35,18,17,16,"setLoops"],[35,26,17,24],[35,27,17,25],[35,30,17,28],[35,34,17,28,"useState"],[35,40,17,36],[35,41,17,36,"useState"],[35,49,17,36],[35,51,17,45],[35,53,17,47],[35,54,17,48],[36,4,18,2],[36,10,18,8],[36,11,18,9,"isLoading"],[36,20,18,18],[36,22,18,20,"setIsLoading"],[36,34,18,32],[36,35,18,33],[36,38,18,36],[36,42,18,36,"useState"],[36,48,18,44],[36,49,18,44,"useState"],[36,57,18,44],[36,59,18,45],[36,64,18,50],[36,65,18,51],[37,4,19,2],[37,10,19,8],[38,6,19,10,"token"],[39,4,19,16],[39,5,19,17],[39,8,19,20],[39,12,19,20,"useAuth"],[39,24,19,27],[39,25,19,27,"useAuth"],[39,32,19,27],[39,34,19,28],[39,35,19,29],[40,4,21,2,"console"],[40,11,21,9],[40,12,21,10,"log"],[40,15,21,13],[40,16,21,14],[40,51,21,49],[40,53,21,51,"API_BASE_URL"],[40,65,21,63],[40,66,21,64],[42,4,23,2],[43,4,24,2],[43,8,24,2,"useEffect"],[43,14,24,11],[43,15,24,11,"useEffect"],[43,24,24,11],[43,26,24,12],[43,32,24,18],[44,6,25,4,"loadStoredLoops"],[44,21,25,19],[44,22,25,20],[44,23,25,21],[45,4,26,2],[45,5,26,3],[45,7,26,5],[45,9,26,7],[45,10,26,8],[47,4,28,2],[48,4,29,2],[48,8,29,2,"useEffect"],[48,14,29,11],[48,15,29,11,"useEffect"],[48,24,29,11],[48,26,29,12],[48,32,29,18],[49,6,30,4,"console"],[49,13,30,11],[49,14,30,12,"log"],[49,17,30,15],[49,18,30,16],[49,73,30,71],[49,74,30,72],[50,6,31,4],[50,10,31,8,"token"],[50,15,31,13],[50,17,31,15],[51,8,32,6,"fetchLoops"],[51,18,32,16],[51,19,32,17],[51,20,32,18],[52,6,33,4],[53,4,34,2],[53,5,34,3],[53,7,34,5],[53,8,34,6,"token"],[53,13,34,11],[53,14,34,12],[53,15,34,13],[54,4,36,2],[54,10,36,8,"loadStoredLoops"],[54,25,36,23],[54,28,36,26],[54,34,36,26,"loadStoredLoops"],[54,35,36,26],[54,40,36,38],[55,6,37,4],[55,10,37,8],[56,8,38,6],[56,14,38,12,"storedLoops"],[56,25,38,23],[56,28,38,26],[56,34,38,32,"AsyncStorage"],[56,46,38,44],[56,47,38,44,"default"],[56,54,38,44],[56,55,38,45,"getItem"],[56,62,38,52],[56,63,38,53],[56,70,38,60],[56,71,38,61],[57,8,39,6],[57,12,39,10,"storedLoops"],[57,23,39,21],[57,25,39,23],[58,10,40,8,"console"],[58,17,40,15],[58,18,40,16,"log"],[58,21,40,19],[58,22,40,20],[58,43,40,41],[58,45,40,43,"storedLoops"],[58,56,40,54],[58,57,40,55],[59,10,41,8],[59,16,41,14,"parsedLoops"],[59,27,41,25],[59,30,41,28,"JSON"],[59,34,41,32],[59,35,41,33,"parse"],[59,40,41,38],[59,41,41,39,"storedLoops"],[59,52,41,50],[59,53,41,51],[60,10,42,8,"console"],[60,17,42,15],[60,18,42,16,"log"],[60,21,42,19],[60,22,42,20],[60,44,42,42],[60,46,42,44,"parsedLoops"],[60,57,42,55],[60,58,42,56],[61,10,43,8,"setLoops"],[61,18,43,16],[61,19,43,17,"parsedLoops"],[61,30,43,28],[61,31,43,29],[62,8,44,6],[63,6,45,4],[63,7,45,5],[63,8,45,6],[63,15,45,13,"error"],[63,20,45,18],[63,22,45,20],[64,8,46,6,"console"],[64,15,46,13],[64,16,46,14,"error"],[64,21,46,19],[64,22,46,20],[64,52,46,50],[64,54,46,52,"error"],[64,59,46,57],[64,60,46,58],[65,6,47,4],[66,4,48,2],[66,5,48,3],[67,4,50,2],[67,10,50,8,"fetchLoops"],[67,20,50,18],[67,23,50,21],[67,27,50,21,"useCallback"],[67,33,50,32],[67,34,50,32,"useCallback"],[67,45,50,32],[67,47,50,33],[67,59,50,45],[68,6,51,4,"console"],[68,13,51,11],[68,14,51,12,"log"],[68,17,51,15],[68,18,51,16],[68,52,51,50],[68,53,51,51],[69,6,52,4,"console"],[69,13,52,11],[69,14,52,12,"log"],[69,17,52,15],[69,18,52,16],[69,33,52,31],[69,35,52,33],[69,36,52,34],[69,37,52,35,"token"],[69,42,52,40],[69,43,52,41],[70,6,53,4],[70,10,53,8],[70,11,53,9,"token"],[70,16,53,14],[70,18,53,16],[71,8,54,6,"console"],[71,15,54,13],[71,16,54,14,"log"],[71,19,54,17],[71,20,54,18],[71,51,54,49],[71,52,54,50],[72,8,55,6],[73,6,56,4],[74,6,58,4],[74,10,58,8],[75,8,59,6,"setIsLoading"],[75,20,59,18],[75,21,59,19],[75,25,59,23],[75,26,59,24],[76,8,60,6],[76,14,60,12,"url"],[76,17,60,15],[76,20,60,18],[76,23,60,21,"API_BASE_URL"],[76,35,60,33],[76,47,60,45],[77,8,61,6,"console"],[77,15,61,13],[77,16,61,14,"log"],[77,19,61,17],[77,20,61,18],[77,40,61,38],[77,42,61,40,"url"],[77,45,61,43],[77,46,61,44],[78,8,62,6],[78,14,62,12,"response"],[78,22,62,20],[78,25,62,23],[78,31,62,29,"fetch"],[78,36,62,34],[78,37,62,35,"url"],[78,40,62,38],[78,42,62,40],[79,10,63,8,"headers"],[79,17,63,15],[79,19,63,17],[80,12,64,10],[80,27,64,25],[80,29,64,27],[80,39,64,37,"token"],[80,44,64,42],[81,10,65,8],[82,8,66,6],[82,9,66,7],[82,10,66,8],[83,8,68,6,"console"],[83,15,68,13],[83,16,68,14,"log"],[83,19,68,17],[83,20,68,18],[83,38,68,36],[83,40,68,38,"response"],[83,48,68,46],[83,49,68,47,"status"],[83,55,68,53],[83,56,68,54],[84,8,69,6,"console"],[84,15,69,13],[84,16,69,14,"log"],[84,19,69,17],[84,20,69,18],[84,35,69,33],[84,37,69,35,"response"],[84,45,69,43],[84,46,69,44,"url"],[84,49,69,47],[84,50,69,48],[85,8,71,6],[85,12,71,10,"response"],[85,20,71,18],[85,21,71,19,"ok"],[85,23,71,21],[85,25,71,23],[86,10,72,8],[86,16,72,14,"data"],[86,20,72,18],[86,23,72,21],[86,29,72,27,"response"],[86,37,72,35],[86,38,72,36,"json"],[86,42,72,40],[86,43,72,41],[86,44,72,42],[87,10,73,8,"setLoops"],[87,18,73,16],[87,19,73,17,"data"],[87,23,73,21],[87,24,73,22],[88,10,74,8],[89,10,75,8],[89,16,75,14,"AsyncStorage"],[89,28,75,26],[89,29,75,26,"default"],[89,36,75,26],[89,37,75,27,"setItem"],[89,44,75,34],[89,45,75,35],[89,52,75,42],[89,54,75,44,"JSON"],[89,58,75,48],[89,59,75,49,"stringify"],[89,68,75,58],[89,69,75,59,"data"],[89,73,75,63],[89,74,75,64],[89,75,75,65],[90,8,76,6],[90,9,76,7],[90,15,76,13],[91,10,77,8,"console"],[91,17,77,15],[91,18,77,16,"error"],[91,23,77,21],[91,24,77,22],[91,48,77,46],[91,50,77,48,"response"],[91,58,77,56],[91,59,77,57,"status"],[91,65,77,63],[91,66,77,64],[92,10,78,8],[92,16,78,14,"errorText"],[92,25,78,23],[92,28,78,26],[92,34,78,32,"response"],[92,42,78,40],[92,43,78,41,"text"],[92,47,78,45],[92,48,78,46],[92,49,78,47],[93,10,79,8,"console"],[93,17,79,15],[93,18,79,16,"error"],[93,23,79,21],[93,24,79,22],[93,46,79,44],[93,48,79,46,"errorText"],[93,57,79,55],[93,58,79,56],[94,8,80,6],[95,6,81,4],[95,7,81,5],[95,8,81,6],[95,15,81,13,"error"],[95,20,81,18],[95,22,81,20],[96,8,82,6,"console"],[96,15,82,13],[96,16,82,14,"error"],[96,21,82,19],[96,22,82,20],[96,45,82,43],[96,47,82,45,"error"],[96,52,82,50],[96,53,82,51],[97,6,83,4],[97,7,83,5],[97,16,83,14],[98,8,84,6,"setIsLoading"],[98,20,84,18],[98,21,84,19],[98,26,84,24],[98,27,84,25],[99,8,85,6,"console"],[99,15,85,13],[99,16,85,14,"log"],[99,19,85,17],[99,20,85,18],[99,56,85,54],[99,57,85,55],[100,6,86,4],[101,4,87,2],[101,5,87,3],[101,7,87,5],[101,8,87,6,"token"],[101,13,87,11],[101,14,87,12],[101,15,87,13],[102,4,89,2],[102,24,90,4],[102,28,90,4,"_reactJsxDevRuntime"],[102,47,90,4],[102,48,90,4,"jsxDEV"],[102,54,90,4],[102,56,90,5,"LoopsContext"],[102,68,90,17],[102,69,90,18,"Provider"],[102,77,90,26],[103,6,91,6,"value"],[103,11,91,11],[103,13,91,13],[104,8,92,8,"loops"],[104,13,92,13],[105,8,93,8,"fetchLoops"],[105,18,93,18],[106,8,94,8,"isLoading"],[107,6,95,6],[107,7,95,8],[108,6,95,8,"children"],[108,14,95,8],[108,16,97,7,"children"],[109,4,97,15],[110,6,97,15,"fileName"],[110,14,97,15],[110,16,97,15,"_jsxFileName"],[110,28,97,15],[111,6,97,15,"lineNumber"],[111,16,97,15],[112,6,97,15,"columnNumber"],[112,18,97,15],[113,4,97,15],[113,11,98,27],[113,12,98,28],[114,2,100,0],[114,3,100,1],[115,2,102,7],[115,8,102,13,"useLoops"],[115,16,102,21],[115,19,102,24,"useLoops"],[115,20,102,24],[115,25,102,30],[116,4,103,2],[116,10,103,8,"context"],[116,17,103,15],[116,20,103,18],[116,24,103,18,"useContext"],[116,30,103,28],[116,31,103,28,"useContext"],[116,41,103,28],[116,43,103,29,"LoopsContext"],[116,55,103,41],[116,56,103,42],[117,4,104,2],[117,8,104,6,"context"],[117,15,104,13],[117,20,104,18,"undefined"],[117,29,104,27],[117,31,104,29],[118,6,105,4],[118,12,105,10],[118,16,105,14,"Error"],[118,21,105,19],[118,22,105,20],[118,68,105,66],[118,69,105,67],[119,4,106,2],[120,4,107,2],[120,11,107,9,"context"],[120,18,107,16],[121,2,108,0],[121,3,108,1],[122,0,108,2],[122,3]],"functionMap":{"names":["<global>","LoopsProvider","useEffect$argument_0","loadStoredLoops","fetchLoops","useLoops"],"mappings":"AAA;sECe;YCQ;GDE;YCG;GDK;0BEE;GFY;iCGE;GHqC;CDa;wBKE;CLM"},"hasCjsExports":false},"type":"js/module"}]}