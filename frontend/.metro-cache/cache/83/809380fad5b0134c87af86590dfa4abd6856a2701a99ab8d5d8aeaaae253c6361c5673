{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":91,"index":91}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":92},"end":{"line":2,"column":69,"index":161}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":162},"end":{"line":3,"column":40,"index":202}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/Users/robertmyers/Code/DoLoop/frontend/contexts/LoopsContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"LoopsProvider\", {\n    enumerable: true,\n    get: function () {\n      return LoopsProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useLoops\", {\n    enumerable: true,\n    get: function () {\n      return useLoops;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _AuthContext = require(_dependencyMap[2], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_BASE_URL = 'https://loop-manager.preview.emergentagent.com';\n  const LoopsContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const LoopsProvider = ({\n    children\n  }) => {\n    _s();\n    const [loops, setLoops] = (0, _react.useState)([]);\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    const {\n      token\n    } = (0, _AuthContext.useAuth)();\n    console.log('LoopsContext: Using API_BASE_URL:', API_BASE_URL);\n\n    // Load loops from AsyncStorage on mount\n    (0, _react.useEffect)(() => {\n      loadStoredLoops();\n    }, []);\n\n    // Fetch loops when token is available\n    (0, _react.useEffect)(() => {\n      console.log('LoopsContext: useEffect triggered, calling fetchLoops');\n      if (token) {\n        fetchLoops();\n      }\n    }, [token]);\n    const loadStoredLoops = async () => {\n      try {\n        const storedLoops = await AsyncStorage.default.getItem('loops');\n        if (storedLoops) {\n          console.log('AsyncStorage loops:', storedLoops);\n          const parsedLoops = JSON.parse(storedLoops);\n          console.log('Parsed stored loops:', parsedLoops);\n          setLoops(parsedLoops);\n        }\n      } catch (error) {\n        console.error('Failed to load stored loops:', error);\n      }\n    };\n    const fetchLoops = (0, _react.useCallback)(async () => {\n      console.log('LoopsContext: fetchLoops started');\n      console.log('Token exists:', !!token);\n      if (!token) {\n        console.log('No token, skipping fetchLoops');\n        return;\n      }\n      try {\n        setIsLoading(true);\n        const url = `${API_BASE_URL}/api/loops`;\n        console.log('Fetching from URL:', url);\n        const response = await fetch(url, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        console.log('Response status:', response.status);\n        console.log('Response URL:', response.url);\n        if (response.ok) {\n          const data = await response.json();\n          setLoops(data);\n          // Store loops in AsyncStorage\n          await AsyncStorage.default.setItem('loops', JSON.stringify(data));\n        } else {\n          console.error('Failed to fetch loops:', response.status);\n          const errorText = await response.text();\n          console.error('Error response body:', errorText);\n        }\n      } catch (error) {\n        console.error('Error fetching loops:', error);\n      } finally {\n        setIsLoading(false);\n        console.log('LoopsContext: fetchLoops completed');\n      }\n    }, [token]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(LoopsContext.Provider, {\n      value: {\n        loops,\n        fetchLoops,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }, this);\n  };\n  _s(LoopsProvider, \"1XduFIDF9Af4heBE/R19PLWsgm8=\", false, function () {\n    return [_AuthContext.useAuth];\n  });\n  _c = LoopsProvider;\n  const useLoops = () => {\n    _s2();\n    const context = (0, _react.useContext)(LoopsContext);\n    if (context === undefined) {\n      throw new Error('useLoops must be used within a LoopsProvider');\n    }\n    return context;\n  };\n  _s2(useLoops, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"LoopsProvider\");\n});","lineCount":133,"map":[[15,2,16,0,"Object"],[15,8,16,0],[15,9,16,0,"defineProperty"],[15,23,16,0],[15,24,16,0,"exports"],[15,31,16,0],[16,4,16,0,"enumerable"],[16,14,16,0],[17,4,16,0,"get"],[17,7,16,0],[17,18,16,0,"get"],[17,19,16,0],[18,6,16,0],[18,13,16,0,"LoopsProvider"],[18,26,16,0],[19,4,16,0],[20,2,16,0],[21,2,102,0,"Object"],[21,8,102,0],[21,9,102,0,"defineProperty"],[21,23,102,0],[21,24,102,0,"exports"],[21,31,102,0],[22,4,102,0,"enumerable"],[22,14,102,0],[23,4,102,0,"get"],[23,7,102,0],[23,18,102,0,"get"],[23,19,102,0],[24,6,102,0],[24,13,102,0,"useLoops"],[24,21,102,0],[25,4,102,0],[26,2,102,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,2,0],[28,45,2,0,"require"],[28,52,2,0],[28,53,2,0,"_dependencyMap"],[28,67,2,0],[29,2,2,0],[29,6,2,0,"AsyncStorage"],[29,18,2,0],[29,21,2,0,"_interopDefault"],[29,36,2,0],[29,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,2,0],[30,2,3,0],[30,6,3,0,"_AuthContext"],[30,18,3,0],[30,21,3,0,"require"],[30,28,3,0],[30,29,3,0,"_dependencyMap"],[30,43,3,0],[31,2,3,40],[31,6,3,40,"_reactJsxDevRuntime"],[31,25,3,40],[31,28,3,40,"require"],[31,35,3,40],[31,36,3,40,"_dependencyMap"],[31,50,3,40],[32,2,6,0],[32,8,6,6,"API_BASE_URL"],[32,20,6,18],[32,23,6,21],[32,71,6,69],[33,2,14,0],[33,8,14,6,"LoopsContext"],[33,20,14,18],[33,36,14,21],[33,40,14,21,"createContext"],[33,46,14,34],[33,47,14,34,"createContext"],[33,60,14,34],[33,62,14,65,"undefined"],[33,71,14,74],[33,72,14,75],[34,2,16,7],[34,8,16,13,"LoopsProvider"],[34,21,16,67],[34,24,16,70,"LoopsProvider"],[34,25,16,71],[35,4,16,73,"children"],[36,2,16,82],[36,3,16,83],[36,8,16,88],[37,4,16,88,"_s"],[37,6,16,88],[38,4,17,2],[38,10,17,8],[38,11,17,9,"loops"],[38,16,17,14],[38,18,17,16,"setLoops"],[38,26,17,24],[38,27,17,25],[38,30,17,28],[38,34,17,28,"useState"],[38,40,17,36],[38,41,17,36,"useState"],[38,49,17,36],[38,51,17,45],[38,53,17,47],[38,54,17,48],[39,4,18,2],[39,10,18,8],[39,11,18,9,"isLoading"],[39,20,18,18],[39,22,18,20,"setIsLoading"],[39,34,18,32],[39,35,18,33],[39,38,18,36],[39,42,18,36,"useState"],[39,48,18,44],[39,49,18,44,"useState"],[39,57,18,44],[39,59,18,45],[39,64,18,50],[39,65,18,51],[40,4,19,2],[40,10,19,8],[41,6,19,10,"token"],[42,4,19,16],[42,5,19,17],[42,8,19,20],[42,12,19,20,"useAuth"],[42,24,19,27],[42,25,19,27,"useAuth"],[42,32,19,27],[42,34,19,28],[42,35,19,29],[43,4,21,2,"console"],[43,11,21,9],[43,12,21,10,"log"],[43,15,21,13],[43,16,21,14],[43,51,21,49],[43,53,21,51,"API_BASE_URL"],[43,65,21,63],[43,66,21,64],[45,4,23,2],[46,4,24,2],[46,8,24,2,"useEffect"],[46,14,24,11],[46,15,24,11,"useEffect"],[46,24,24,11],[46,26,24,12],[46,32,24,18],[47,6,25,4,"loadStoredLoops"],[47,21,25,19],[47,22,25,20],[47,23,25,21],[48,4,26,2],[48,5,26,3],[48,7,26,5],[48,9,26,7],[48,10,26,8],[50,4,28,2],[51,4,29,2],[51,8,29,2,"useEffect"],[51,14,29,11],[51,15,29,11,"useEffect"],[51,24,29,11],[51,26,29,12],[51,32,29,18],[52,6,30,4,"console"],[52,13,30,11],[52,14,30,12,"log"],[52,17,30,15],[52,18,30,16],[52,73,30,71],[52,74,30,72],[53,6,31,4],[53,10,31,8,"token"],[53,15,31,13],[53,17,31,15],[54,8,32,6,"fetchLoops"],[54,18,32,16],[54,19,32,17],[54,20,32,18],[55,6,33,4],[56,4,34,2],[56,5,34,3],[56,7,34,5],[56,8,34,6,"token"],[56,13,34,11],[56,14,34,12],[56,15,34,13],[57,4,36,2],[57,10,36,8,"loadStoredLoops"],[57,25,36,23],[57,28,36,26],[57,34,36,26,"loadStoredLoops"],[57,35,36,26],[57,40,36,38],[58,6,37,4],[58,10,37,8],[59,8,38,6],[59,14,38,12,"storedLoops"],[59,25,38,23],[59,28,38,26],[59,34,38,32,"AsyncStorage"],[59,46,38,44],[59,47,38,44,"default"],[59,54,38,44],[59,55,38,45,"getItem"],[59,62,38,52],[59,63,38,53],[59,70,38,60],[59,71,38,61],[60,8,39,6],[60,12,39,10,"storedLoops"],[60,23,39,21],[60,25,39,23],[61,10,40,8,"console"],[61,17,40,15],[61,18,40,16,"log"],[61,21,40,19],[61,22,40,20],[61,43,40,41],[61,45,40,43,"storedLoops"],[61,56,40,54],[61,57,40,55],[62,10,41,8],[62,16,41,14,"parsedLoops"],[62,27,41,25],[62,30,41,28,"JSON"],[62,34,41,32],[62,35,41,33,"parse"],[62,40,41,38],[62,41,41,39,"storedLoops"],[62,52,41,50],[62,53,41,51],[63,10,42,8,"console"],[63,17,42,15],[63,18,42,16,"log"],[63,21,42,19],[63,22,42,20],[63,44,42,42],[63,46,42,44,"parsedLoops"],[63,57,42,55],[63,58,42,56],[64,10,43,8,"setLoops"],[64,18,43,16],[64,19,43,17,"parsedLoops"],[64,30,43,28],[64,31,43,29],[65,8,44,6],[66,6,45,4],[66,7,45,5],[66,8,45,6],[66,15,45,13,"error"],[66,20,45,18],[66,22,45,20],[67,8,46,6,"console"],[67,15,46,13],[67,16,46,14,"error"],[67,21,46,19],[67,22,46,20],[67,52,46,50],[67,54,46,52,"error"],[67,59,46,57],[67,60,46,58],[68,6,47,4],[69,4,48,2],[69,5,48,3],[70,4,50,2],[70,10,50,8,"fetchLoops"],[70,20,50,18],[70,23,50,21],[70,27,50,21,"useCallback"],[70,33,50,32],[70,34,50,32,"useCallback"],[70,45,50,32],[70,47,50,33],[70,59,50,45],[71,6,51,4,"console"],[71,13,51,11],[71,14,51,12,"log"],[71,17,51,15],[71,18,51,16],[71,52,51,50],[71,53,51,51],[72,6,52,4,"console"],[72,13,52,11],[72,14,52,12,"log"],[72,17,52,15],[72,18,52,16],[72,33,52,31],[72,35,52,33],[72,36,52,34],[72,37,52,35,"token"],[72,42,52,40],[72,43,52,41],[73,6,53,4],[73,10,53,8],[73,11,53,9,"token"],[73,16,53,14],[73,18,53,16],[74,8,54,6,"console"],[74,15,54,13],[74,16,54,14,"log"],[74,19,54,17],[74,20,54,18],[74,51,54,49],[74,52,54,50],[75,8,55,6],[76,6,56,4],[77,6,58,4],[77,10,58,8],[78,8,59,6,"setIsLoading"],[78,20,59,18],[78,21,59,19],[78,25,59,23],[78,26,59,24],[79,8,60,6],[79,14,60,12,"url"],[79,17,60,15],[79,20,60,18],[79,23,60,21,"API_BASE_URL"],[79,35,60,33],[79,47,60,45],[80,8,61,6,"console"],[80,15,61,13],[80,16,61,14,"log"],[80,19,61,17],[80,20,61,18],[80,40,61,38],[80,42,61,40,"url"],[80,45,61,43],[80,46,61,44],[81,8,62,6],[81,14,62,12,"response"],[81,22,62,20],[81,25,62,23],[81,31,62,29,"fetch"],[81,36,62,34],[81,37,62,35,"url"],[81,40,62,38],[81,42,62,40],[82,10,63,8,"headers"],[82,17,63,15],[82,19,63,17],[83,12,64,10],[83,27,64,25],[83,29,64,27],[83,39,64,37,"token"],[83,44,64,42],[84,10,65,8],[85,8,66,6],[85,9,66,7],[85,10,66,8],[86,8,68,6,"console"],[86,15,68,13],[86,16,68,14,"log"],[86,19,68,17],[86,20,68,18],[86,38,68,36],[86,40,68,38,"response"],[86,48,68,46],[86,49,68,47,"status"],[86,55,68,53],[86,56,68,54],[87,8,69,6,"console"],[87,15,69,13],[87,16,69,14,"log"],[87,19,69,17],[87,20,69,18],[87,35,69,33],[87,37,69,35,"response"],[87,45,69,43],[87,46,69,44,"url"],[87,49,69,47],[87,50,69,48],[88,8,71,6],[88,12,71,10,"response"],[88,20,71,18],[88,21,71,19,"ok"],[88,23,71,21],[88,25,71,23],[89,10,72,8],[89,16,72,14,"data"],[89,20,72,18],[89,23,72,21],[89,29,72,27,"response"],[89,37,72,35],[89,38,72,36,"json"],[89,42,72,40],[89,43,72,41],[89,44,72,42],[90,10,73,8,"setLoops"],[90,18,73,16],[90,19,73,17,"data"],[90,23,73,21],[90,24,73,22],[91,10,74,8],[92,10,75,8],[92,16,75,14,"AsyncStorage"],[92,28,75,26],[92,29,75,26,"default"],[92,36,75,26],[92,37,75,27,"setItem"],[92,44,75,34],[92,45,75,35],[92,52,75,42],[92,54,75,44,"JSON"],[92,58,75,48],[92,59,75,49,"stringify"],[92,68,75,58],[92,69,75,59,"data"],[92,73,75,63],[92,74,75,64],[92,75,75,65],[93,8,76,6],[93,9,76,7],[93,15,76,13],[94,10,77,8,"console"],[94,17,77,15],[94,18,77,16,"error"],[94,23,77,21],[94,24,77,22],[94,48,77,46],[94,50,77,48,"response"],[94,58,77,56],[94,59,77,57,"status"],[94,65,77,63],[94,66,77,64],[95,10,78,8],[95,16,78,14,"errorText"],[95,25,78,23],[95,28,78,26],[95,34,78,32,"response"],[95,42,78,40],[95,43,78,41,"text"],[95,47,78,45],[95,48,78,46],[95,49,78,47],[96,10,79,8,"console"],[96,17,79,15],[96,18,79,16,"error"],[96,23,79,21],[96,24,79,22],[96,46,79,44],[96,48,79,46,"errorText"],[96,57,79,55],[96,58,79,56],[97,8,80,6],[98,6,81,4],[98,7,81,5],[98,8,81,6],[98,15,81,13,"error"],[98,20,81,18],[98,22,81,20],[99,8,82,6,"console"],[99,15,82,13],[99,16,82,14,"error"],[99,21,82,19],[99,22,82,20],[99,45,82,43],[99,47,82,45,"error"],[99,52,82,50],[99,53,82,51],[100,6,83,4],[100,7,83,5],[100,16,83,14],[101,8,84,6,"setIsLoading"],[101,20,84,18],[101,21,84,19],[101,26,84,24],[101,27,84,25],[102,8,85,6,"console"],[102,15,85,13],[102,16,85,14,"log"],[102,19,85,17],[102,20,85,18],[102,56,85,54],[102,57,85,55],[103,6,86,4],[104,4,87,2],[104,5,87,3],[104,7,87,5],[104,8,87,6,"token"],[104,13,87,11],[104,14,87,12],[104,15,87,13],[105,4,89,2],[105,24,90,4],[105,28,90,4,"_reactJsxDevRuntime"],[105,47,90,4],[105,48,90,4,"jsxDEV"],[105,54,90,4],[105,56,90,5,"LoopsContext"],[105,68,90,17],[105,69,90,18,"Provider"],[105,77,90,26],[106,6,91,6,"value"],[106,11,91,11],[106,13,91,13],[107,8,92,8,"loops"],[107,13,92,13],[108,8,93,8,"fetchLoops"],[108,18,93,18],[109,8,94,8,"isLoading"],[110,6,95,6],[110,7,95,8],[111,6,95,8,"children"],[111,14,95,8],[111,16,97,7,"children"],[112,4,97,15],[113,6,97,15,"fileName"],[113,14,97,15],[113,16,97,15,"_jsxFileName"],[113,28,97,15],[114,6,97,15,"lineNumber"],[114,16,97,15],[115,6,97,15,"columnNumber"],[115,18,97,15],[116,4,97,15],[116,11,98,27],[116,12,98,28],[117,2,100,0],[117,3,100,1],[118,2,100,2,"_s"],[118,4,100,2],[118,5,16,13,"LoopsProvider"],[118,18,16,67],[119,4,16,67],[119,12,19,20,"useAuth"],[119,24,19,27],[119,25,19,27,"useAuth"],[119,32,19,27],[120,2,19,27],[121,2,19,27,"_c"],[121,4,19,27],[121,7,16,13,"LoopsProvider"],[121,20,16,67],[122,2,102,7],[122,8,102,13,"useLoops"],[122,16,102,21],[122,19,102,24,"useLoops"],[122,20,102,24],[122,25,102,30],[123,4,102,30,"_s2"],[123,7,102,30],[124,4,103,2],[124,10,103,8,"context"],[124,17,103,15],[124,20,103,18],[124,24,103,18,"useContext"],[124,30,103,28],[124,31,103,28,"useContext"],[124,41,103,28],[124,43,103,29,"LoopsContext"],[124,55,103,41],[124,56,103,42],[125,4,104,2],[125,8,104,6,"context"],[125,15,104,13],[125,20,104,18,"undefined"],[125,29,104,27],[125,31,104,29],[126,6,105,4],[126,12,105,10],[126,16,105,14,"Error"],[126,21,105,19],[126,22,105,20],[126,68,105,66],[126,69,105,67],[127,4,106,2],[128,4,107,2],[128,11,107,9,"context"],[128,18,107,16],[129,2,108,0],[129,3,108,1],[130,2,108,2,"_s2"],[130,5,108,2],[130,6,102,13,"useLoops"],[130,14,102,21],[131,2,102,21],[131,6,102,21,"_c"],[131,8,102,21],[132,2,102,21,"$RefreshReg$"],[132,14,102,21],[132,15,102,21,"_c"],[132,17,102,21],[133,0,102,21],[133,3]],"functionMap":{"names":["<global>","LoopsProvider","useEffect$argument_0","loadStoredLoops","fetchLoops","useLoops"],"mappings":"AAA;sECe;YCQ;GDE;YCG;GDK;0BEE;GFY;iCGE;GHqC;CDa;wBKE;CLM"},"hasCjsExports":false},"type":"js/module"}]}